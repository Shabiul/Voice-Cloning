graph TD
    %% Global Inputs
    UserAudio[User Microphone/Audio Files] -->|Input| DataIngest
    
    subgraph DataIngest [Data Acquisition & Storage]
        direction TB
        RawWav[Raw .wav Files]
        RawMP4[Raw .mp4 Video]
        RawMP4 -->|Extract Audio| RawWav
    end
    
    UserAudio --> RawWav
    UserAudio --> RawMP4

    %% Path 1: Custom Python Scripts
    subgraph CustomPipeline [Custom CNN Pipeline]
        direction TB
        ScriptRecord[scripts/record_audio.py]
        ScriptPreprocess[scripts/preprocess_audio.py]
        ScriptTrain[scripts/train_model.py]
        ScriptSynth[scripts/synthesize_voice.py]
        CustomModel[(Custom CNN Model .pth)]
        
        RawWav --> ScriptPreprocess
        ScriptPreprocess -->|Cleaned Audio/Tensors| ScriptTrain
        ScriptTrain -->|Train| CustomModel
        
        InputText[Input Text] --> ScriptSynth
        CustomModel --> ScriptSynth
        ScriptSynth --> OutputCustom[Custom Synthesis .wav]
    end

    %% Path 2: RVC Workflow
    subgraph RVCPipeline [RVC Workflow]
        direction TB
        RVCNotebook[RVC Model Training & Inference.ipynb]
        RVCData[RVC/ab, RVC/pc, RVC/vk]
        RVCModel[(RVC Model .pth)]
        RVCIndex[(Feature Index .index)]
        
        RawWav -->|Copy to| RVCData
        RVCData --> RVCNotebook
        RVCNotebook -->|Train| RVCModel
        RVCNotebook -->|Generate| RVCIndex
        
        InputVocals[Source Vocals] --> RVCNotebook
        RVCModel --> RVCNotebook
        RVCIndex --> RVCNotebook
        RVCNotebook --> OutputRVC[RVC Output .wav]
    end

    %% Path 3: So-VITS-SVC
    subgraph SoVitsPipeline [So-VITS-SVC Workflow]
        direction TB
        SVCRaw[so-vits-svc/dataset_raw]
        SVCPre[Preprocessing]
        SVCTrain[Training]
        SVCModel[(So-VITS Model .pth)]
        SVCInfer[Inference]
        
        RawWav -->|Copy to| SVCRaw
        SVCRaw --> SVCPre
        SVCPre --> SVCTrain
        SVCTrain --> SVCModel
        
        InputSource[Source Audio] --> SVCInfer
        SVCModel --> SVCInfer
        SVCInfer --> OutputSVC[So-VITS Output .wav]
    end

    %% Legend / Connections
    ScriptRecord --> RawWav
